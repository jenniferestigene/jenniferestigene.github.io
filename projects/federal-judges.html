<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Federal Judges Diversity | Jennifer Estigene</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.7;
            color: #2c2c2c;
            background: #ffffff;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 40px;
            right: 40px;
            width: 60px;
            height: 60px;
            background: #2c2c2c;
            color: #fff;
            border: none;
            border-radius: 50%;
            font-size: 1.5em;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: #000;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.25);
        }

        .nav {
            padding: 30px 40px;
            border-bottom: 1px solid #e8e8e8;
        }

        .nav a {
            color: #2c2c2c;
            text-decoration: none;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid transparent;
            transition: border-color 0.2s;
            font-family: -apple-system, sans-serif;
        }

        .nav a:hover {
            border-bottom-color: #2c2c2c;
        }

        .split-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            min-height: calc(100vh - 80px);
        }

        .visual-side {
            position: sticky;
            top: 0;
            height: 100vh;
            background: #fafafa;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 40px;
            border-right: 1px solid #e8e8e8;
        }

        .viz-container {
            width: 100%;
            max-width: 700px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            padding: 40px;
        }

        .viz-title {
            font-family: 'Roboto Condensed', -apple-system, sans-serif;
            font-size: 1.4em;
            font-weight: 700;
            color: #2D2D2A;
            margin-bottom: 10px;
            text-align: left;
        }

        .viz-subtitle {
            font-family: 'Libre Franklin', -apple-system, sans-serif;
            font-size: 0.85em;
            color: #4a4a4a;
            line-height: 1.5;
            margin-bottom: 20px;
            text-align: left;
        }

        /* Decade selector buttons */
        .decade-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 25px;
            justify-content: center;
        }

        .decade-btn {
            padding: 8px 16px;
            background: #f0f0f0;
            border: 2px solid transparent;
            border-radius: 4px;
            cursor: pointer;
            font-family: -apple-system, sans-serif;
            font-size: 0.85em;
            font-weight: 600;
            color: #666;
            transition: all 0.2s ease;
        }

        .decade-btn:hover {
            background: #e0e0e0;
            color: #2c2c2c;
        }

        .decade-btn.active {
            background: #2c2c2c;
            color: white;
            border-color: #2c2c2c;
        }

        #d3-visualization {
            width: 100%;
            height: 450px;
            margin-bottom: 15px;
        }

        .viz-caption {
            font-family: 'Libre Franklin', -apple-system, sans-serif;
            font-size: 0.75em;
            color: #666;
            text-align: left;
            border-top: 1px solid #e8e8e8;
            padding-top: 12px;
        }

        .viz-caption strong {
            color: #2D2D2A;
            font-weight: 600;
        }

        .content-side {
            padding: 80px 60px 120px;
        }

        .header-block {
            margin-bottom: 60px;
        }

        h1 {
            font-size: 3.5em;
            font-weight: 400;
            margin-bottom: 25px;
            line-height: 1.2;
            font-family: 'Georgia', serif;
        }

        .subtitle {
            font-size: 1.2em;
            color: #666;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 15px 20px;
            font-size: 0.95em;
            padding: 25px 0;
            border-top: 1px solid #e8e8e8;
            border-bottom: 1px solid #e8e8e8;
            font-family: -apple-system, sans-serif;
        }

        .meta-label {
            font-weight: 600;
            color: #999;
            text-transform: uppercase;
            font-size: 0.85em;
            letter-spacing: 1px;
        }

        .meta-value {
            color: #444;
        }

        .content-block {
            margin: 60px 0;
        }

        .content-block h2 {
            font-size: 2em;
            font-weight: 400;
            margin-bottom: 25px;
            font-family: 'Georgia', serif;
        }

        .content-block p {
            font-size: 1.1em;
            margin-bottom: 1.5em;
            color: #444;
            line-height: 1.8;
        }

        .content-block ul {
            margin-left: 40px;
            margin-bottom: 1.5em;
            line-height: 1.8;
        }

        .content-block li {
            margin-bottom: 10px;
            color: #555;
            font-size: 1.05em;
        }

        .content-block strong {
            color: #2c2c2c;
            font-weight: 600;
        }

        .stat-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 40px 0;
        }

        .stat-card {
            background: #f8f8f8;
            padding: 30px 20px;
            text-align: center;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
            background: #ffffff;
        }

        .stat-number {
            font-size: 3em;
            font-weight: 400;
            color: #d62828;
            font-family: 'Georgia', serif;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 0.85em;
            color: #666;
            font-family: -apple-system, sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .callout-box {
            background: #2c2c2c;
            color: #ffffff;
            padding: 40px;
            margin: 40px 0;
            border-radius: 4px;
        }

        .callout-box p {
            font-size: 1.2em;
            line-height: 1.7;
            color: #ffffff;
            margin: 0;
        }

        .methodology-list {
            background: #f8f8f8;
            padding: 40px;
            border-radius: 4px;
            margin: 40px 0;
        }

        .methodology-list h3 {
            font-size: 1.5em;
            font-weight: 400;
            margin-bottom: 25px;
            font-family: 'Georgia', serif;
        }

        .methodology-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .methodology-list li {
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
            font-size: 1em;
            color: #555;
        }

        .methodology-list li:last-child {
            border-bottom: none;
        }

        .methodology-list strong {
            color: #2c2c2c;
            font-weight: 600;
            display: inline-block;
            min-width: 140px;
        }

        /* D3 Styles */
        .bar {
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .bar:hover {
            opacity: 0.8;
        }

        .bar-label {
            font-family: -apple-system, sans-serif;
            font-size: 11px;
            font-weight: 600;
            pointer-events: none;
        }

        .bar-value {
            font-family: -apple-system, sans-serif;
            font-size: 10px;
            font-weight: 600;
            pointer-events: none;
        }

        .axis text {
            font-family: -apple-system, sans-serif;
            font-size: 10px;
        }

        .axis-label {
            font-family: -apple-system, sans-serif;
            font-size: 11px;
            font-weight: 600;
        }

        .tooltip {
            position: fixed;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid #2c2c2c;
            border-radius: 8px;
            pointer-events: none;
            font-size: 0.9rem;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 10002;
            font-family: -apple-system, sans-serif;
        }

        .tooltip-demographic {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 6px;
            color: #2c2c2c;
        }

        .tooltip-value {
            color: #666;
            font-size: 0.9rem;
        }

        footer {
            text-align: center;
            padding: 60px 20px;
            color: #999;
            font-size: 0.8em;
            border-top: 1px solid #e8e8e8;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-family: -apple-system, sans-serif;
            margin-top: 80px;
        }

        @media (max-width: 1200px) {
            .back-to-top {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.2em;
            }

            .split-container {
                grid-template-columns: 1fr;
            }

            .visual-side {
                position: relative;
                height: auto;
                min-height: 60vh;
            }

            h1 {
                font-size: 2.5em;
            }

            .stat-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">↑</button>

    <nav class="nav">
        <a href="../web-pages/data-visualization.html">← Back to Data Visualization</a>
    </nav>

    <div class="split-container">
        <!-- Left: Interactive D3 Visualization -->
        <div class="visual-side">
            <div class="viz-container">
                <h2 class="viz-title">Breaking the Bench: The Race for Representation</h2>
                <p class="viz-subtitle">Click on decade buttons to explore demographic changes in federal judicial appointments from 1780s to 2020s. Hover over bars for exact percentages.</p>
                
                <!-- Decade selector buttons -->
                <div class="decade-selector" id="decade-buttons"></div>
                
                <div id="d3-visualization"></div>
                <p class="viz-caption"><strong>Data:</strong> Federal Judicial Center | <strong>Graphic:</strong> Jennifer Estigene</p>
            </div>
        </div>

        <!-- Right: Content -->
        <div class="content-side">
            <div class="header-block">
                <h1>Breaking the Bench</h1>
                <p class="subtitle">
                    236 years of demographic change in America's federal judiciary. From complete exclusion to gradual, hard-won representation
                </p>

                <div class="meta-grid">
                    <span class="meta-label">Date</span>
                    <span class="meta-value">June 2025</span>
                    
                    <span class="meta-label">Tools</span>
                    <span class="meta-value">R, D3.js, ggplot2, tidyverse</span>
                    
                    <span class="meta-label">Source</span>
                    <span class="meta-value">Federal Judicial Center</span>
                    
                    <span class="meta-label">Type</span>
                    <span class="meta-value">Interactive Bar Chart, Historical Analysis</span>
                </div>
            </div>

            <div class="content-block">
                <h2>The Problem</h2>
                <p>
                    For 145 years (1789 to 1934) every single federal judge appointed in the United States was a white man. Not one woman. Not one person of color. The federal judiciary, tasked with interpreting laws meant to protect all Americans, reflected only a narrow slice of the population it served.
                </p>

                <div class="stat-cards">
                    <div class="stat-card">
                        <div class="stat-number">145</div>
                        <div class="stat-label">Years of Exclusion</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">1934</div>
                        <div class="stat-label">First Woman Judge</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">1937</div>
                        <div class="stat-label">First Black Judge</div>
                    </div>
                </div>

                <div class="callout-box">
                    <p>
                        Even today, white men still comprise over 50% of federal judges despite representing only 30% of the U.S. population. The visualization reveals not just historical exclusion, but the continuing underrepresentation of women and people of color on the federal bench.
                    </p>
                </div>
            </div>

            <div class="content-block">
                <h2>Key Insights</h2>
                
                <p>
                    <strong>The Great Gray Wall (1790-1930s):</strong> Click through the early decades in the visualization to see the monotonous story: 100% white male, decade after decade. For nearly a century and a half, the federal judiciary was a closed system, accessible only to white men. The result of systematic barriers including educational discrimination, social networks that excluded women and minorities, and explicit racism and sexism in legal institutions.
                </p>

                <p>
                    <strong>First Cracks in the Wall (1934-1960s):</strong> Florence Allen became the first woman federal judge in 1934, appointed to the Sixth Circuit Court of Appeals. William Hastie followed in 1937 as the first Black federal judge. But these appointments were exceptions, not the beginning of a trend. Select the 1950 decade to see that even by mid-century, 99.5% of judges were still white men.
                </p>

                <p>
                    <strong>The Acceleration (1970s-1990s):</strong> Compare the 1970 decade to 1990 in the visualization to see the dramatic transformation. By 1970, white men comprised 93.5% of appointments, still dominant, but no longer absolute. By 1990, that number had dropped to 74.9%, with women and people of color making up over a quarter of appointments. This wasn't automatic progress, it required deliberate policy choices and sustained pressure from civil rights movements.
                </p>

                <p>
                    <strong>The Modern Bench (2010s-2020s):</strong> Select 2010 or 2020 to see the most diverse federal judiciary in American history. By 2010, white males fell to 45.8% of appointments, with white women (24.2%), Black men (10.6%), Hispanic men (5.5%), and other groups gaining significant representation. The 2020s show further progress with white males at just 38%. Yet persistent gaps remain as Asian Americans, Pacific Islanders (only 3 in all of U.S. history), and Native Americans are still severely underrepresented.
                </p>

                <p>
                    <strong>Why Representation Matters:</strong> Federal judges serve lifetime appointments and shape American law for generations. When the judiciary does not reflect the diversity of the American people, it risks blind spots in understanding how laws affect different communities. Research shows that diverse courts make different decisions on civil rights, employment discrimination, and criminal justice. Differences that have real consequences for millions of Americans.
                </p>
            </div>

            <div class="content-block">
                <h2>Why This Visualization Works</h2>
                
                <p>
                    The interactive bar chart allows you to explore 236 years of data at your own pace. Instead of overwhelming you with all decades at once, you can click through time and watch the composition change.
                </p>

                <ul>
                    <li><strong>Interactive Exploration:</strong> Click any decade button to instantly see the judicial composition for that period</li>
                    <li><strong>Smooth Transitions:</strong> Watch bars grow and shrink as you move between decades, making change visible and dramatic</li>
                    <li><strong>Hover Details:</strong> Get exact percentages and judge counts for any demographic group</li>
                    <li><strong>Visual Impact:</strong> That massive gray bar in early decades immediately communicates historical exclusion</li>
                    <li><strong>Comparative Analysis:</strong> Jump between decades to compare different eras (e.g., 1850 vs. 2020)</li>
                </ul>

                <p>
                    The color-coded bars make it easy to track specific demographic groups across time. Watch white women (teal) appear in the 1930s, grow slowly through the 1960s, then accelerate rapidly in the 1970s-1990s. Notice how Black representation (orange/red) follows a similar but slightly earlier pattern.
                </p>
            </div>

            <div class="content-block">
                <h2>The Data Story</h2>
                
                <p>
                    This visualization draws on the Federal Judicial Center's comprehensive database of all Article III federal judges since 1789, over 3,500 judges spanning 236 years. Article III judges include those on U.S. District Courts, Courts of Appeals, and the Supreme Court, the most powerful positions in the federal judiciary.
                </p>

                <p>
                    The interactive format reveals patterns that static charts can't capture. Try clicking rapidly between 1970 and 2020, you'll see a transformation that took just 50 years after 180 years of stasis. Or compare 1790, 1900, and 1990: the first two are virtually identical, while 1990 shows a completely transformed institution.
                </p>

                <p>
                    Perhaps most strikingly, the data shows that diversification is both dramatic and incomplete. The transformation from 100% white male to 38% white male took more than 200 years. The shift from 93.5% (1970) to 38% (2020) took just 50 years.
                </p>
            </div>

            <div class="methodology-list">
                <h3>Methodology</h3>
                <ul>
                    <li><strong>Data Source:</strong> Federal Judicial Center biographical database via historydata R package</li>
                    <li><strong>Time Period:</strong> 1789-2025 (236 years of federal judicial history)</li>
                    <li><strong>Sample Size:</strong> 4,169 federal judge appointments with valid commission dates</li>
                    <li><strong>Categories:</strong> 9 demographic groups (White Male/Female, Black Male/Female, Hispanic Male/Female, Asian Male/Female, Pacific Islander)</li>
                    <li><strong>Temporal Aggregation:</strong> Appointments grouped by decade for clarity and comparability</li>
                    <li><strong>Calculation:</strong> Percentages calculated within each decade to show compositional change</li>
                    <li><strong>Visualization Type:</strong> Interactive horizontal bar chart with D3.js v7</li>
                    <li><strong>Interaction:</strong> Click decade buttons to switch views, hover bars for exact values</li>
                    <li><strong>Animation:</strong> Smooth transitions between decades using D3 transitions</li>
                </ul>
            </div>

            <div class="content-block">
                <h2>Historical Context</h2>
                <p>
                    <strong>Florence Allen (1934):</strong> Appointed by FDR to the Sixth Circuit, Allen was the first woman federal judge. Use the visualization to see how rare this was in the 1930s, she represented less than 1% of appointments. She was considered for the Supreme Court multiple times but never nominated, it would be another 47 years before Sandra Day O'Connor broke that barrier in 1981.
                </p>

                <p>
                    <strong>William Hastie (1937):</strong> Also appointed by FDR, Hastie became the first Black federal judge. He later resigned from a War Department position in protest over military segregation, highlighting how even groundbreaking appointments existed within systems of ongoing discrimination.
                </p>

                <p>
                    <strong>Carter's Transformation (1977-1981):</strong> President Jimmy Carter made diversifying the federal judiciary an explicit priority. Compare 1970 to 1990 in the visualization to see the impact: women went from 2.9% to 10.7% of appointments, while Black representation more than doubled. Carter appointed 40 women and 38 Black judges, more than all previous presidents combined.
                </p>

                <p>
                    <strong>Obama Era (2009-2017):</strong> Select the 2010 decade to see President Obama's historic impact. For the first time, white males became a minority of new judicial appointments (45.8%). Women comprised 34% of appointments, and people of color reached unprecedented representation across all categories.
                </p>
            </div>

            <footer>
                <p>© 2026 Jennifer Estigene</p>
            </footer>
        </div>
    </div>

    <div class="tooltip"></div>

    <script>
        // Back to Top Button
        const backToTop = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });

        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });


        // Embedded data from your R script
        const timelineData = [{"decade":1780,"demographic":"White Male","percentage":100,"n":15,"rank":1},{"decade":1790,"demographic":"White Male","percentage":100,"n":29,"rank":1},{"decade":1800,"demographic":"White Male","percentage":100,"n":44,"rank":1},{"decade":1810,"demographic":"White Male","percentage":100,"n":24,"rank":1},{"decade":1820,"demographic":"White Male","percentage":100,"n":35,"rank":1},{"decade":1830,"demographic":"White Male","percentage":100,"n":30,"rank":1},{"decade":1840,"demographic":"White Male","percentage":100,"n":33,"rank":1},{"decade":1850,"demographic":"White Male","percentage":100,"n":43,"rank":1},{"decade":1860,"demographic":"White Male","percentage":100,"n":74,"rank":1},{"decade":1870,"demographic":"White Male","percentage":100,"n":63,"rank":1},{"decade":1880,"demographic":"White Male","percentage":100,"n":58,"rank":1},{"decade":1890,"demographic":"White Male","percentage":100,"n":124,"rank":1},{"decade":1900,"demographic":"White Male","percentage":100,"n":124,"rank":1},{"decade":1910,"demographic":"White Male","percentage":100,"n":140,"rank":1},{"decade":1920,"demographic":"White Male","percentage":99.4594594594595,"n":184,"rank":1},{"decade":1920,"demographic":"White Female","percentage":0.540540540540541,"n":1,"rank":2},{"decade":1930,"demographic":"White Male","percentage":99.4252873563218,"n":173,"rank":1},{"decade":1930,"demographic":"White Female","percentage":0.574712643678161,"n":1,"rank":2},{"decade":1940,"demographic":"White Male","percentage":99.4594594594595,"n":184,"rank":1},{"decade":1940,"demographic":"Black Male","percentage":0.540540540540541,"n":1,"rank":2},{"decade":1950,"demographic":"White Male","percentage":99.4594594594595,"n":184,"rank":1},{"decade":1950,"demographic":"White Female","percentage":0.540540540540541,"n":1,"rank":2},{"decade":1960,"demographic":"White Male","percentage":96.3099631002170,"n":209,"rank":1},{"decade":1960,"demographic":"Black Male","percentage":1.84501845018450,"n":4,"rank":2},{"decade":1960,"demographic":"White Female","percentage":1.84501845018450,"n":4,"rank":2},{"decade":1970,"demographic":"White Male","percentage":93.4971098265896,"n":388,"rank":1},{"decade":1970,"demographic":"Black Male","percentage":3.61271676300578,"n":15,"rank":2},{"decade":1970,"demographic":"White Female","percentage":2.89017341040462,"n":12,"rank":3},{"decade":1980,"demographic":"White Male","percentage":84.4522968197880,"n":478,"rank":1},{"decade":1980,"demographic":"White Female","percentage":7.24381625441696,"n":41,"rank":2},{"decade":1980,"demographic":"Black Male","percentage":6.53710247349823,"n":37,"rank":3},{"decade":1980,"demographic":"Hispanic Male","percentage":1.23841059602649,"n":7,"rank":4},{"decade":1980,"demographic":"Black Female","percentage":0.530035335689046,"n":3,"rank":5},{"decade":1990,"demographic":"White Male","percentage":74.9011857707510,"n":379,"rank":1},{"decade":1990,"demographic":"White Female","percentage":10.6719367588933,"n":54,"rank":2},{"decade":1990,"demographic":"Black Male","percentage":7.70750988142292,"n":39,"rank":3},{"decade":1990,"demographic":"Black Female","percentage":2.96442687747036,"n":15,"rank":4},{"decade":1990,"demographic":"Hispanic Male","percentage":2.37154150197628,"n":12,"rank":5},{"decade":1990,"demographic":"Asian Male","percentage":0.790513833992095,"n":4,"rank":6},{"decade":1990,"demographic":"Hispanic Female","percentage":0.592885375494071,"n":3,"rank":7},{"decade":2000,"demographic":"White Male","percentage":59.3766329073913,"n":220,"rank":1},{"decade":2000,"demographic":"White Female","percentage":18.5791366906475,"n":69,"rank":2},{"decade":2000,"demographic":"Black Male","percentage":9.94638069705093,"n":37,"rank":3},{"decade":2000,"demographic":"Hispanic Male","percentage":5.37634408602150,"n":20,"rank":4},{"decade":2000,"demographic":"Black Female","percentage":3.49932885906040,"n":13,"rank":5},{"decade":2000,"demographic":"Hispanic Female","percentage":1.61073825503356,"n":6,"rank":6},{"decade":2000,"demographic":"Asian Male","percentage":1.34228187919463,"n":5,"rank":7},{"decade":2000,"demographic":"Asian Female","percentage":0.268456375838926,"n":1,"rank":8},{"decade":2010,"demographic":"White Male","percentage":45.8064516129032,"n":142,"rank":1},{"decade":2010,"demographic":"White Female","percentage":24.1935483870968,"n":75,"rank":2},{"decade":2010,"demographic":"Black Male","percentage":10.6451612903226,"n":33,"rank":3},{"decade":2010,"demographic":"Black Female","percentage":6.77419354838710,"n":21,"rank":4},{"decade":2010,"demographic":"Hispanic Male","percentage":5.48387096774194,"n":17,"rank":5},{"decade":2010,"demographic":"Asian Female","percentage":2.58064516129032,"n":8,"rank":6},{"decade":2010,"demographic":"Hispanic Female","percentage":2.58064516129032,"n":8,"rank":6},{"decade":2010,"demographic":"Asian Male","percentage":1.61290322580645,"n":5,"rank":8},{"decade":2010,"demographic":"Pacific Islander","percentage":0.322580645161290,"n":1,"rank":9},{"decade":2020,"demographic":"White Male","percentage":38.0136986301370,"n":111,"rank":1},{"decade":2020,"demographic":"White Female","percentage":21.9178082191781,"n":64,"rank":2},{"decade":2020,"demographic":"Black Male","percentage":13.3561643835616,"n":39,"rank":3},{"decade":2020,"demographic":"Hispanic Male","percentage":12.3287671232877,"n":36,"rank":4},{"decade":2020,"demographic":"Black Female","percentage":6.16438356164384,"n":18,"rank":5},{"decade":2020,"demographic":"Hispanic Female","percentage":5.82191780821918,"n":17,"rank":6},{"decade":2020,"demographic":"Asian Male","percentage":1.71232876712329,"n":5,"rank":7},{"decade":2020,"demographic":"Asian Female","percentage":0.684931506849315,"n":2,"rank":8}];

        const colorScale = {
            "White Male": "#B8B8B8",
            "White Female": "#2a9d8f",
            "Black Male": "#f4a259",
            "Black Female": "#d62828",
            "Hispanic Male": "#8338ec",
            "Hispanic Female": "#ff006e",
            "Asian Male": "#fb5607",
            "Asian Female": "#ffbe0b",
            "Pacific Islander": "#3a86ff"
        };

        // Get unique decades
        const decades = [...new Set(timelineData.map(d => d.decade))].sort();
        
        // Start with 1790 
        let currentDecade = 1790;

        // Create decade buttons
        const buttonContainer = d3.select('#decade-buttons');
        
        // Select specific decades for buttons
        const displayDecades = [1790, 1850, 1900, 1950, 1970, 1990, 2010, 2020];
        
        displayDecades.forEach(decade => {
            buttonContainer.append('button')
                .attr('class', decade === currentDecade ? 'decade-btn active' : 'decade-btn')
                .attr('data-decade', decade)
                .text(decade + 's')
                .on('click', function() {
                    // Update active button
                    d3.selectAll('.decade-btn').classed('active', false);
                    d3.select(this).classed('active', true);
                    
                    // Update chart
                    currentDecade = decade;
                    updateChart(decade);
                });
        });

        // Set up SVG
        const container = d3.select('#d3-visualization');
        const containerWidth = container.node().getBoundingClientRect().width;
        const margin = {top: 20, right: 80, bottom: 40, left: 150};
        const width = containerWidth - margin.left - margin.right;
        const height = 450 - margin.top - margin.bottom;

        const svg = container
            .append('svg')
            .attr('width', '100%')
            .attr('height', '100%')
            .attr('viewBox', `0 0 ${containerWidth} 450`)
            .append('g')
            .attr('transform', `translate(${margin.left},${margin.top})`);

        const tooltip = d3.select('.tooltip');

        // Scales
        const xScale = d3.scaleLinear()
            .domain([0, 100])
            .range([0, width]);

        const yScale = d3.scaleBand()
            .range([0, height])
            .padding(0.2);

        // Axes
        const xAxis = d3.axisBottom(xScale)
            .ticks(5)
            .tickFormat(d => d + '%');

        const xAxisGroup = svg.append('g')
            .attr('class', 'axis')
            .attr('transform', `translate(0,${height})`)
            .call(xAxis);

        const yAxisGroup = svg.append('g')
            .attr('class', 'axis');

        // X-axis label
        svg.append('text')
            .attr('class', 'axis-label')
            .attr('text-anchor', 'middle')
            .attr('x', width / 2)
            .attr('y', height + 35)
            .text('Percentage of Appointments (%)');

        // Update chart function
        function updateChart(decade) {
            const data = timelineData
                .filter(d => d.decade === decade)
                .sort((a, b) => b.percentage - a.percentage);

            // Update y scale domain
            yScale.domain(data.map(d => d.demographic));

            // Update y axis
            yAxisGroup
                .transition()
                .duration(500)
                .call(d3.axisLeft(yScale).tickSize(0))
                .selectAll('text')
                .style('font-weight', '600');

            // Bind data to bars
            const bars = svg.selectAll('.bar')
                .data(data, d => d.demographic);

            // Exit
            bars.exit()
                .transition()
                .duration(300)
                .attr('width', 0)
                .remove();

            // Enter + Update
            const barsEnter = bars.enter()
                .append('rect')
                .attr('class', 'bar')
                .attr('x', 0)
                .attr('y', d => yScale(d.demographic))
                .attr('height', yScale.bandwidth())
                .attr('width', 0)
                .attr('fill', d => colorScale[d.demographic]);

            barsEnter.merge(bars)
                .transition()
                .duration(700)
                .attr('y', d => yScale(d.demographic))
                .attr('height', yScale.bandwidth())
                .attr('width', d => xScale(d.percentage))
                .attr('fill', d => colorScale[d.demographic]);

            // Update value labels
            const labels = svg.selectAll('.bar-value')
                .data(data, d => d.demographic);

            labels.exit().remove();

            const labelsEnter = labels.enter()
                .append('text')
                .attr('class', 'bar-value')
                .attr('x', 0)
                .attr('y', d => yScale(d.demographic) + yScale.bandwidth() / 2)
                .attr('dy', '0.35em')
                .attr('opacity', 0);

            labelsEnter.merge(labels)
                .transition()
                .duration(700)
                .attr('x', d => xScale(d.percentage) + 5)
                .attr('y', d => yScale(d.demographic) + yScale.bandwidth() / 2)
                .attr('opacity', 1)
                .text(d => d.percentage.toFixed(1) + '%');

            // Add hover interactions
            svg.selectAll('.bar')
                .on('mouseover', function(event, d) {
                    tooltip
                        .style('opacity', 1)
                        .html(`
                            <div class="tooltip-demographic">${d.demographic}</div>
                            <div class="tooltip-value">${d.percentage.toFixed(1)}% (${d.n} judges)</div>
                        `)
                        .style('left', (event.pageX + 15) + 'px')
                        .style('top', (event.pageY - 15) + 'px');
                })
                .on('mousemove', function(event) {
                    tooltip
                        .style('left', (event.pageX + 15) + 'px')
                        .style('top', (event.pageY - 15) + 'px');
                })
                .on('mouseout', function() {
                    tooltip.style('opacity', 0);
                });
        }

        // Initial render
        updateChart(currentDecade);
    </script>
</body>
</html>
